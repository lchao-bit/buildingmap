<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />  <!-- zc,使用中文 -->
    <title>Leaflet geohash test</title>

	<style type="text/css">
	/*css控制地图大小自动充满整个窗口*/
	html{height:100%}
	body{height:95%}
	
	#row1{float:left;display: inline ;}
	body{background: #ecf0f1;color: #34495e;text-shadow: white 1px 1px 1px;}.value{text-align: middle;font-weight: bold;width: 210px;line-height: 60px;margin: -18px auto;letter-spacing: -0.07em;text-shadow: white 2px 2px 2px;}input[type="range"] {display: block;-webkit-appearance: none;background-color: #bdc3c7;width: 100%;height: 10px;border-radius: 5px;margin: 5px auto;outline: 0;}input[type="range"]::-webkit-slider-thumb {-webkit-appearance: none;background-color: #e74c3c;width: 30px;height: 30px;border-radius: 50%;border: 2px solid white;cursor: pointer;transition: 0.3s ease-in-out;}.range{position:relative;width:60%;margin:0 auto;} /*width:900px*/
	#map{width: 100%;height:98%}
	
	</style>
	<!-- 地图显示相关库文件的添加 -->
	<link rel="stylesheet" href="leaflet.css" />
	<link rel="stylesheet" href="leaflet.label.css" />
	<script src="leaflet-src.js"></script>
	<!--<script src="TileLayer.GeoJSON.js"></script>-->
	<script src="leaflet.label-src.js"></script>
	<script src="leaflet.label.js"></script>
	<script src="OSMBuildings-Leaflet.debug.js"></script>	
</head>
<body>
	<div id="map"></div>	
	<script>
		//创建地图容器以及定义初始点  116.0427386,40.0840582  116.32324,39.97375  -105.00341892242432, 39.75383843460583
		var map = L.map('map',{maxZoom:19,minZoom:5}).setView([1.26837,103.82428], 12);//39.894, 116.3155
		//var point
		//drawGeoHashes("wx4erj");
		var geohashdata;
		//init_map();
		testdraw();
		function testdraw(){
	
	var testroad1 ={"crs":{"properties":{"name":"urn:ogc:def:crs:EPSG::4326"},"type":"name"},
 "features":[{"properties":{},
 							"geometry":{
					 								"coordinates":[
					 																[103.9639410,1.3538212],[103.9645111,1.3518581],[103.9647729,1.3510453],[103.9650882,1.3500930],[103.9653199,1.3496146],[103.9656289,1.3490826],[103.9660409,1.3485506],[103.9665645,1.3479757],[103.9669684,1.3473149],[103.9677232,1.3459713],[103.8580286,1.3937872],[103.8580953,1.3929822],[103.8583948,1.3876464],[103.8584249,1.3854904],[103.8584634,1.3837406],[103.8584741,1.3826991],[103.8584041,1.3808760]
					 															],
					 								"type":"LineString"
					 							 },
					 		"type":"Feature"
					 	  }],
 "totalFeatures":1,"type":"FeatureCollection"};
 
 var testroad2 = {"crs":{"properties":{"name":"urn:ogc:def:crs:EPSG::4326"},"type":"name"},
 "features":[{"properties":{},
 							"geometry":{
					 								"coordinates":[
																					[103.8455833,1.2726667],[103.8242823,1.2683744],[103.8294088,1.2755919],[103.8126865,1.2718096],[103.8184732,1.2668029]
					 															],
					 								"type":"LineString"
					 							 },
					 		"type":"Feature"
					 	  }],
 "totalFeatures":1,"type":"FeatureCollection"};

var s_1_org_5 = {"crs":{"properties":{"name":"urn:ogc:def:crs:EPSG::4326"},"type":"name"},
 "features":[{"properties":{},
 							"geometry":{
					 								"coordinates":[
																					[103.84558,1.27267],[103.82428,1.26837],[103.82941,1.27559],[103.81269,1.27181],[103.81847,1.26680]
					 															],
					 								"type":"LineString"
					 							 },
					 		"type":"Feature"
					 	  }],
 "totalFeatures":1,"type":"FeatureCollection"};
 var s_1_ed_5 = {"crs":{"properties":{"name":"urn:ogc:def:crs:EPSG::4326"},"type":"name"},
 "features":[{"properties":{},
 							"geometry":{
					 								"coordinates":[
																					[103.84558,1.27267],[103.82428,1.26838],[103.82941,1.27559],[103.81268,1.27181],[103.81848,1.26680]
					 															],
					 								"type":"LineString"
					 							 },
					 		"type":"Feature"
					 	  }],
 "totalFeatures":1,"type":"FeatureCollection"};
		GeohashLayer = new L.geoJson(s_1_org_5, {
    //style: getStyle,
    onEachFeature: onEachFeature
  }).addTo(map);
}

//test data-----------------
var test1 = {
	      type: 'Feature',
	      properties: {
	      	count: 2018,
	        hash: 'wx4erj'
	      },
	      geometry: {
	        type: 'LineString',//'Polygon'    'Point'
	        coordinates:[[116.0427386,40.0840582],[116.0429385,40.0837305]]//[[116.32324,39.97375],[116.32324,39.97924],[116.33422,39.97375],[116.33422,39.97924]]
	      }
	    };
  var test2 =	    {
	      type: 'Feature',
	      properties: {
	      	count: 2018,
	        hash: 'wx4erj'
	      },
	      geometry: {
	        type: 'LineString',//'Polygon'    'Point'
	        coordinates:[[116.0428052,40.0849905],[116.0427386,40.0840582]]
	      }
	    };
    var combdata = {
    type: 'FeatureCollection',
    features: []
  };
  
  var test3 =	    {
	      type: 'Feature',
	      properties: {
	      	count: 2018,
	        hash: 'wx4erj'
	      },
	      geometry: {
	        type: 'LineString',//'Polygon'    'Point'
	        coordinates:[[116.33408,39.97734],[116.33404,39.97734],
	        						 [116.33396,39.97732],[116.33393,39.97726],
	        						 [116.33422,39.97526]]
	      }
	    };
	    var test4 =	    {
	      type: 'Feature',
	      properties: {
	      	count: 2018,
	        hash: 'wx4erj'
	      },
	      geometry: {
	        type: 'LineString',//'Polygon'    'Point'
	        coordinates:[[116.33042,39.97526],[116.32917,39.97529]]
	      }
	    };
    var combdata = {
    type: 'FeatureCollection',
    features: []
  };
  
  //combdata.features.push(test1);
  //combdata.features.push(test2);
  combdata.features.push(test3);
  combdata.features.push(test4);
 //test data end-----------------
	

	function opacityScale () {
  return 0.5;
}
	
	function getStyle(feature) {
	  return {
	    fillOpacity: 0.5,//opacityScale(feature.properties.count),
	    fillColor: '#00529b',
	    weight: 0.5,
	    opacity: 1,
	    color: '#fff'
	  };
	}

function onEachFeature(feature, layer) {
  //layer.bindPopup(feature.properties.hash + ": " + feature.properties.count);
  //latlondata = layer.getBounds();
  //drawGeoHashes(geohash);
}

	</script>
	<!-- 样式表的添加 -->
	<script src="water.js"></script>	
	<script src="ways.js"></script>
	<script src="landcover.js"></script>	
	<script src="railway.js"></script>	
	

	
</body>
</html>